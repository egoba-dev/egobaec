{# admin/rental_overdue.twig #}
{# 返却遅延一覧画面のテンプレート #}
{% extends '@admin/default_frame.twig' %}

{% set menus = ['rental', 'rental_overdue'] %}

{% block title %}{{ 'rental.admin.overdue.title'|trans }}{% endblock %}
{% block sub_title %}{{ 'rental.admin.overdue.sub_title'|trans }}{% endblock %}

{% block stylesheet %}
    <style>
        .status-overdue {
            color: #fff;
            background-color: #C04949;
        }
    </style>
{% endblock %}

{% block main %}
    <div class="c-contentsArea__cols">
        <div class="c-contentsArea__primaryCol">
            <div class="c-primaryCol">
                <div class="card rounded border-0 mb-4">
                    <div class="card-header">
                        <div class="d-inline-block" data-toggle="tooltip" data-placement="top" title="{{ 'rental.admin.overdue.tooltip'|trans }}">
                            <span>{{ 'rental.admin.overdue.list_title'|trans }}</span>
                            <i class="fa fa-question-circle fa-lg ml-1"></i>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        {% if pagination.totalItemCount > 0 %}
                            <table class="table table-sm">
                                <thead>
                                <tr>
                                    <th>{{ 'rental.admin.rental.id'|trans }}</th>
                                    <th>{{ 'rental.admin.rental.product_name'|trans }}</th>
                                    <th>{{ 'rental.admin.rental.order_no'|trans }}</th>
                                    <th>{{ 'rental.admin.rental.customer_name'|trans }}</th>
                                    <th>{{ 'rental.admin.rental.rental_start_date'|trans }}</th>
                                    <th>{{ 'rental.admin.rental.rental_end_date'|trans }}</th>
                                    <th>{{ 'rental.admin.overdue.overdue_days'|trans }}</th>
                                    <th>{{ 'rental.admin.common.operation'|trans }}</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for RentalOrder in pagination %}
                                    <tr>
                                        <td>{{ RentalOrder.id }}</td>
                                        <td>
                                            <a href="{{ url('admin_product_product_edit', {'id': RentalOrder.ProductClass.Product.id}) }}">
                                                {{ RentalOrder.ProductClass.Product.name }}
                                            </a>
                                        </td>
                                        <td>
                                            <a href="{{ url('admin_order_edit', {'id': RentalOrder.Order.id}) }}">
                                                {{ RentalOrder.Order.order_no }}
                                            </a>
                                        </td>
                                        <td>{{ RentalOrder.Order.name01 }} {{ RentalOrder.Order.name02 }}</td>
                                        <td>{{ RentalOrder.rental_start_date|date('Y/m/d') }}</td>
                                        <td>{{ RentalOrder.rental_end_date|date('Y/m/d') }}</td>
                                        <td class="text-danger font-weight-bold">
                                            {% set days = date().diff(RentalOrder.rental_end_date).days %}
                                            {{ days }} {{ 'rental.admin.overdue.days'|trans }}
                                        </td>
                                        <td class="align-middle pr-3">
                                            <div class="row justify-content-end">
                                                <div class="col-auto text-center">
                                                    <a href="{{ url('admin_rental_return', {'id': RentalOrder.id}) }}" class="btn btn-ec-actionIcon mr-2" data-toggle="tooltip" data-placement="top" title="{{ 'rental.admin.rental.return'|trans }}">
                                                        <i class="fa fa-reply fa-lg text-secondary"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>

                            <div class="row justify-content-md-center mb-4">
                                {% include '@admin/pager.twig' with {'pages': pagination.paginationData, 'routes': 'admin_rental_overdue'} %}
                            </div>
                        {% else %}
                            <div class="text-center p-4">
                                {{ 'rental.admin.overdue.no_data'|trans }}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}